# 練習題 3：容器化和Kubernetes部署

## 目標
完成本練習後，您將能夠：
- 創建和管理GKE集群
- 部署Kubernetes應用
- 配置服務和Ingress
- 實施容器最佳實踐

## 任務

### 任務 1：創建GKE集群
創建一個GKE集群：
- 使用私有集群配置
- 配置多個節點池
- 啟用工作負載身份
- 設置網路策略

### 任務 2：部署示例應用
部署一個多層應用：
- **前端**: Nginx容器
- **後端**: Node.js API服務
- **數據庫**: PostgreSQL (使用Cloud SQL)

### 任務 3：配置Kubernetes服務
創建必要的Kubernetes資源：
- **Deployment**: 應用部署
- **Service**: 服務發現
- **ConfigMap**: 配置管理
- **Secret**: 敏感數據

### 任務 4：設置Ingress
配置Ingress控制器：
- 外部訪問入口
- 域名路由
- SSL終止
- 負載平衡

### 任務 5：實施監控和日誌
設置Kubernetes監控：
- Pod健康檢查
- 資源使用監控
- 日誌收集
- 警報配置

## 要求

1. **容器最佳實踐**：
   - 使用適當的基礎映像
   - 配置資源限制
   - 實施健康檢查
   - 優化映像大小

2. **Kubernetes配置**：
   - 使用命名空間隔離
   - 配置RBAC
   - 實施網路策略
   - 設置Pod安全策略

3. **安全配置**：
   - 使用工作負載身份
   - 配置Secret管理
   - 實施網路分段
   - 掃描映像漏洞

4. **可觀測性**：
   - 結構化日誌
   - 指標收集
   - 分散式追蹤
   - 警報通知

## 評分標準

- **集群配置** (25%)：GKE集群配置正確
- **應用部署** (30%)：應用成功部署和運行
- **服務配置** (20%)：服務和Ingress配置正確
- **監控和日誌** (15%)：監控配置完整
- **安全實踐** (10%)：安全措施到位

## 提示

1. 參考 `04-gke` 章節
2. 使用Helm簡化部署
3. 測試應用功能
4. 驗證監控數據

## 提交要求

提交以下文件：
- `main.tf` - GKE集群和基礎設施
- `kubernetes/` - Kubernetes配置文件
- `docker/` - Dockerfile和映像配置
- `monitoring/` - 監控配置
- `README.md` - 部署說明
- `ARCHITECTURE.md` - 架構文檔

## 時間限制

建議完成時間：6-8小時

## 難度等級

⭐⭐⭐⭐☆ (中高級)

## 進階挑戰

完成基本要求後，可以嘗試：
1. 實施服務網格 (Istio)
2. 配置GitOps工作流
3. 設置多集群管理
4. 實施災難恢復
